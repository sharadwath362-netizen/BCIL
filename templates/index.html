<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Barcode Inventory System</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="site-header">
    <img src="/static/college_logo.png" alt="College Logo" class="college-logo">

    <div class="header-text">
        <h2>Barcode Based Inventory System</h2>
        <p class="subtitle">Experiential Learning - Python</p>
        <p class="subtitle">
            Developed by: <strong>Sharadwath S D</strong> | USN: <strong>RVCE25BCY030</strong><br>
            <strong>Adarsh C</strong> | USN: <strong>RVCE25BCY033</strong><br>
            <strong>Soham G Devarahalli</strong> | USN: <strong>RVCE25BCY028</strong><br>
            <strong>Advik Kamath</strong> | USN: <strong>RVCE25BCY023</strong>
        </p>
    </div>
</div>

<div class="tabs">
    <button onclick="showTab('inventory')">Inventory</button>
    <button onclick="showTab('logs')">Time Log</button>
</div>

<!-- INVENTORY TAB -->
<div id="inventory" class="tab">

    <h3>Add Item</h3>
    <form onsubmit="addItem(); return false;">
        <input type="text" id="add_barcode" placeholder="Scan / Enter Barcode" required>
        <input type="number" id="add_quantity" placeholder="Quantity to Add" min="1" required>
        <button type="submit">Add</button>
    </form>

    <h3>Remove Item</h3>
    <form onsubmit="removeItem(); return false;">
        <input type="text" id="remove_barcode" placeholder="Enter Barcode" required>
        <input type="number" id="remove_quantity" placeholder="Quantity to Remove" min="1" required>
        <button type="submit">Remove</button>
    </form>

    <h3>Current Inventory</h3>
    <table>
        <tr>
            <th>ID</th>
            <th>Barcode</th>
            <th>Quantity</th>
            <th>Last Updated</th>
        </tr>
        {% for item in inventory %}
        <tr>
            <td>{{ item[0] }}</td>
            <td>{{ item[1] }}</td>
            <td>{{ item[2] }}</td>
            <td>{{ item[3] }}</td>
        </tr>
        {% endfor %}
    </table>

</div>

<!-- LOG TAB -->
<div id="logs" class="tab" style="display:none">

    <h3>Inventory Time Log</h3>

    <div class="export-buttons">
        <a href="/export/excel"><button>Export to Excel</button></a>
        <a href="/export/pdf"><button>Export to PDF</button></a>
    </div>

    <table>
        <tr>
            <th>ID</th>
            <th>Barcode</th>
            <th>Action</th>
            <th>Quantity</th>
            <th>Time</th>
        </tr>
        {% for log in logs %}
        <tr>
            <td>{{ log[0] }}</td>
            <td>{{ log[1] }}</td>
            <td>{{ log[2] }}</td>
            <td>{{ log[3] }}</td>
            <td>{{ log[4] }}</td>
        </tr>
        {% endfor %}
    </table>

</div>

<script>
function showTab(tabName) {
    document.getElementById("inventory").style.display = "none";
    document.getElementById("logs").style.display = "none";
    document.getElementById(tabName).style.display = "block";
}

// -------- ADD ITEM --------
function addItem() {
    fetch("/add", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            barcode: document.getElementById("add_barcode").value,
            quantity: document.getElementById("add_quantity").value
        })
    })
    .then(res => res.json())
    .then(() => location.reload());
}

// -------- REMOVE ITEM --------
function removeItem() {
    fetch("/remove", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            barcode: document.getElementById("remove_barcode").value,
            quantity: document.getElementById("remove_quantity").value
        })
    })
    .then(res => res.json())
    .then(() => location.reload());
}
</script>

</body>
</html>

